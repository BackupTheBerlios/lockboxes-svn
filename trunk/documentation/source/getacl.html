__HEAD__:lkb_getacl
__SEEA__:create.html
__SEEA__:setacl.html
__SEEA__:lock.html
__SEEA__:acl.html
<h2>Name</h2>

<p>lkb_getacl - get the acl of an open lockbox</p>

<h2>Synopsis</h2>
<pre>
#include &lt;lockbox.h&gt;

int lkb_getacl(	lockbox_t <var>id</var>,
		lockbox_acl *<var>acl</var>,
		size_t <var>size</var>,
		size_t *<var>sizeneeded</var>);
</pre>

<h2>Description</h2>

<p>
	lkb_getacl retrieves the acl of the lockbox with the handle <var>id</var>.
	<var>acl</var> is a buffer to hold the acl of the lockbox, and
	<var>size</var> is the size of the buffer. The call stores the number of bytes
	used to hold the acl in the value pointed to by <var>sizeneeded</var>.
</p>
<p>
	If <var>size</var> is not large enough to store the acl, lkb_getacl stores the
	number of bytes needed in the value pointed to by <var>sizeneeded</var>, returns
	-1, and sets <u>errno</u> to ENOMEM.
</p>

<h2>Return Value</h2>

<p>
	On success, lkb_getacl returns 0. On failure, it returns -1.
</p>

<h2>Errors</h2>

<table summary="errors">
	<tr>
		<td valign="top">
			EIO
		</td>
		<td valign="top">
			No vault is currently open.
		</td>
	</tr>
	<tr>
		<td valign="top">
			ENOENT
		</td>
		<td valign="top">
			There is no lockbox open with handle <var>id</var>.
		</td>
	</tr>
	<tr>
		<td valign="top">
			EFAULT
		</td>
		<td valign="top">
			<var>size</var> is large enough to hold the name, but
			<var>acl</var> is not a pointer to a buffer large enough to hold
			it.
		</td>
	</tr>
	<tr>
		<td valign="top">
			EINTR
		</td>
		<td valign="top">
			The call was interrupted by a signal.
		</td>
	</tr>
	<tr>
		<td valign="top">
			ENOMEM
		</td>
		<td valign="top">
			<var>size</var> is not large enough to hold the name.
		</td>
	</tr>
	<tr>
		<td valign="top">
			EPERM
		</td>
		<td valign="top">
			You do not have LKB_ACCESS_GETACL permission on that lockbox.
		</td>
	</tr>
</table>
